<!-- src/main/resources/templates/product/list.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Product List</title>
</head>
<body>
<form th:action="@{/product/list}" method="get">
    <select name="sortKey" th:value="*{sortKey}">
        <option value="sales" th:selected="${sortKey == 'sales'}">판매량</option>
        <option value="date" th:selected="${sortKey == 'date'}">등록 날짜</option>
        <option value="price" th:selected="${sortKey == 'price'}">가격</option>
    </select>
    <select name="sortOrder" th:value="*{sortOrder}">
        <option value="asc" th:selected="${sortOrder == 'asc'}">↑</option>
        <option value="desc" th:selected="${sortOrder == 'desc'}">↓</option>
    </select>
    <button type="submit">정렬</button>
</form>
<br>

<script th:inline="javascript">
    var sortKey = /*[[${sortKey}]]*/ 'default';
    console.log("sortKey:", sortKey);
</script>

<table border="1">
    <tr>
        <th>책 제목</th>
        <th>상품 가격</th>
        <th>할인율</th>
        <th>할인 금액</th>
        <th>주문 금액</th>
        <th>판매량</th>
        <th>별점</th>
        <th>상품 등록일</th>
    </tr>
    <tr th:each="product : ${list}">
        <td th:text="${product.prodName}">Name</td>
        <td th:text="${product.prodBasePrice}">Price</td>
        <td th:text="${product.discRate}">Discount Rate</td>
        <td th:text="${product.discPrice}">Sale Price</td>
        <td th:text="${product.salePrice}">Sale Price</td>
        <td th:text="${product.totalSales}">Total Sales</td>
        <td th:text="${product.starAvg}">Star Rating Average</td>
        <td th:text="${product.regDate}">Registration Date</td>
    </tr>
</table>
<br>
<nav style="text-align: center;">
    <span th:if="${ph.showPrev}" style="display: inline-block; margin-right: 5px;">
        <a th:href="@{/product/list(page=${ph.beginPage-1}, pageSize=${ph.pageSize}, sortKey=${sortKey}, sortOrder=${sortOrder})}">
            <span th:text="'<'"></span>
        </a>
    </span>
    <span th:each="i : ${#numbers.sequence(ph.beginPage, ph.endPage)}" style="display: inline-block; margin-right: 5px;">
        <a th:href="@{/product/list(page=${i}, pageSize=${ph.pageSize}, sortKey=${sortKey}, sortOrder=${sortOrder})}" th:text="${i}"></a>
    </span>
    <span th:if="${ph.showNext}" style="display: inline-block; margin-left: 5px;">
        <a th:href="@{/product/list(page=${ph.endPage+1}, pageSize=${ph.pageSize}, sortKey=${sortKey}, sortOrder=${sortOrder})}">
            <span th:text="'>'"></span>
        </a>
    </span>
</nav>
</body>
</html>